name = "imgchat"
main = "src/index.ts"
compatibility_date = "2024-11-01"
assets = { directory = "public" }

routes = [
  { pattern = "imgchat.justright.fm", custom_domain = true }
]

workers_dev = true

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "imgchat-db"
database_id = "780e8979-75a6-407b-b8fb-d63b5041eb13"

# R2 Storage for generated images
[[r2_buckets]]
binding = "IMAGES"
bucket_name = "imgchat-images"

[vars]
ENVIRONMENT = "production"

[observability]
enabled = true

# Secrets (run these after setup):
# wrangler secret put JWT_SECRET
# (use same value as justright.fm for cookie validation)
